import{R as w,k as O}from"./index-C_hsGypp.js";var D={easeInOutQuad:function(e,t,r,a){var i=r-t;return(e/=a/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}},M=D;function I(e){return e*Math.PI/180}function h(e,t){return e+Math.random()*(t-e)}function A(e,t){return Math.floor(e+Math.random()*(t-e+1))}var x;(function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"})(x||(x={}));var l;(function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"})(l||(l={}));const N=1e3/60;class T{constructor(t,r,a,i){this.getOptions=r;const{colors:o,initialVelocityX:s,initialVelocityY:n}=this.getOptions();this.context=t,this.x=a,this.y=i,this.w=h(5,20),this.h=h(5,20),this.radius=h(5,10),this.vx=typeof s=="number"?h(-s,s):h(s.min,s.max),this.vy=typeof n=="number"?h(-n,0):h(n.min,n.max),this.shape=A(0,2),this.angle=I(h(0,360)),this.angularSpin=h(-.2,.2),this.color=o[Math.floor(Math.random()*o.length)],this.rotateY=h(0,1),this.rotationDirection=h(0,1)?l.Positive:l.Negative}update(t){const{gravity:r,wind:a,friction:i,opacity:o,drawShape:s}=this.getOptions(),n=t/N;this.x+=this.vx*n,this.y+=this.vy*n,this.vy+=r*n,this.vx+=a*n,this.vx*=i**n,this.vy*=i**n,this.rotateY>=1&&this.rotationDirection===l.Positive?this.rotationDirection=l.Negative:this.rotateY<=-1&&this.rotationDirection===l.Negative&&(this.rotationDirection=l.Positive);const u=.1*this.rotationDirection*n;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,s&&typeof s=="function")s.call(this,this.context);else switch(this.shape){case x.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case x.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case x.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class E{constructor(t,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=h(this.x,this.w+this.x),o=h(this.y,this.h+this.y);return new T(this.context,this.getOptions,i,o)},this.animate=i=>{const{canvas:o,context:s,particlesGenerated:n,lastNumberOfPieces:u}=this,{run:m,recycle:p,numberOfPieces:d,debug:R,tweenFunction:S,tweenDuration:C}=this.getOptions();if(!m)return!1;const v=this.particles.length,g=p?v:n;if(g<d){u!==d&&(this.tweenProgress=0,this.tweenFrom=g,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(C,Math.max(0,this.tweenProgress+i));const f=S(this.tweenProgress,this.tweenFrom,d,C),c=Math.round(f-g);for(let F=0;F<c;F++)this.particles.push(this.getParticle());this.particlesGenerated+=c}R&&(s.font="12px sans-serif",s.fillStyle="#333",s.textAlign="right",s.fillText(`Particles: ${v}`,o.width-10,o.height-20));for(let f=this.particles.length-1;f>=0;f--){const c=this.particles[f];c.update(i),(c.y>o.height||c.y<-100||c.x>o.width+100||c.x<-100)&&(p&&g<=d?this.particles[f]=this.getParticle():this.removeParticleAt(f))}return v>0||g<d},this.canvas=t;const a=this.canvas.getContext("2d");if(!a)throw new Error("Could not get canvas context");this.context=a,this.getOptions=r}}const P={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:M.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Y{constructor(t,r){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const o={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...o,...P,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:o,onConfettiComplete:s,frameRate:n},canvas:u,context:m}=this,p=Math.min(i-this.lastFrameTime,50);if(n&&p<1e3/n){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(n?p%n:0),o&&(m.fillStyle="white",m.clearRect(0,0,u.width,u.height)),this.generator.animate(p)?this.rafId=requestAnimationFrame(this.update):(s&&typeof s=="function"&&this.generator.particlesGenerated>0&&s.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const a=this.canvas.getContext("2d");if(!a)throw new Error("Could not get canvas context");this.context=a,this.generator=new E(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(t){var i,o;const r=(i=this._options)==null?void 0:i.run,a=(o=this._options)==null?void 0:o.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&a===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&r===!1&&this.update()}}const _=w.createRef();class b extends w.Component{constructor(t){super(t),this.canvas=w.createRef(),this.canvas=t.canvasRef||_}componentDidMount(){if(this.canvas.current){const t=y(this.props)[0];this.confetti=new Y(this.canvas.current,t)}}componentDidUpdate(){const t=y(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,r]=y(this.props),a={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return O.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...r,style:a})}}b.defaultProps={...P};b.displayName="ReactConfetti";function y(e){const t={},r={},a={},i=[...Object.keys(P),"confettiSource","drawShape","onConfettiComplete","frameRate"],o=["canvasRef"];for(const s in e){const n=e[s];i.includes(s)?t[s]=n:o.includes(s)?o[s]=n:a[s]=n}return[t,a,r]}const j=w.forwardRef((e,t)=>O.jsx(b,{canvasRef:t,...e}));export{j as R};
